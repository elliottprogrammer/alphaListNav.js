/*! alphaListNav.js - v0.7.1
Build Date: 02-05-2020
Author: [Bryan Elliott] (https://github.com/elliottprogrammer/)
Git Repository: git+https://github.com/elliottprogrammer/alphaListNav.js.git */

"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var AlphaListNav=function(){function n(e){var o=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),_defineProperty(this,"init",function(){if(o.listElem){var e=o._getListItems(o.listElem),a=o._getAlphaObj(e);console.log(a);var t=o._generateNewListHTML(a),r=o._generateAlphaNav(a);o.listElem.parentNode.replaceChild(t,o.listElem);var v=document.getElementById("alpha-list");v.parentNode.insertBefore(r,v);var g=document.getElementById("alpha-nav");o.initAlphaListNav(v,g,a),g.addEventListener("click",function(e){if(e.preventDefault(),e.target.dataset.filter){var t=e.target.dataset.filter,r=!0,n=!1,a=void 0;try{for(var i,o=g.children[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){i.value.classList.remove("active")}}catch(e){n=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}var l=!0,s=!1,c=void 0;try{for(var d,p=v.children[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){d.value.classList.remove("active")}}catch(e){s=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw c}}if(e.target.classList.add("active"),"*"===t){var u=!0,f=!1,h=void 0;try{for(var y,m=v.children[Symbol.iterator]();!(u=(y=m.next()).done);u=!0){y.value.classList.add("active")}}catch(e){f=!0,h=e}finally{try{u||null==m.return||m.return()}finally{if(f)throw h}}}else document.getElementById(t).classList.add("active")}}),o.options.showCounts&&Array.prototype.slice.call(g.children).forEach(function(e){e.addEventListener("mouseover",function(e){var t=0;if(e.target.dataset.filter){var r=e.target.dataset.filter;"no-match"!==r&&(t="*"===r?Object.keys(a).reduce(function(e,t){return e+a[t].length},0):a[r].length)}var n=document.createElement("span");n.className="alphaNav-count-elem",n.style.cssText="position:absolute;top:-12px;left:0;width:100%;text-align:center;font-size:75%;",n.textContent=t,e.target.appendChild(n)}),e.addEventListener("mouseout",function(e){e.target.removeChild(e.target.children[0])})})}else console.error("The supplied argument must be a HTML DOM element.")}),_defineProperty(this,"_getText",function(e){var t,r="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=o._getText(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)r+=o._getText(t);return r}),_defineProperty(this,"initAlphaListNav",function(e,t,r){if(o.options.initLetter)if("*"===o.options.initLetter&&o.options.includeAll){t.querySelector('a[data-filter="'.concat(o.options.initLetter.toLowerCase(),'"]')).classList.add("active");var n=e.querySelectorAll("div.alpha-list-wrapper");Array.prototype.slice.call(n).forEach(function(e){return e.classList.add("active")})}else r.hasOwnProperty(o.options.initLetter.toLowerCase())&&(t.querySelector('a[data-filter="'.concat(o.options.initLetter.toLowerCase(),'"]')).classList.add("active"),e.querySelector("#".concat(o.options.initLetter.toLowerCase())).classList.add("active"));else if(o.options.initHidden)o.options.initHiddenText&&document.getElementById("initText").classList.add("active");else if(o.options.includeAll){var a=e.querySelectorAll("div.alpha-list-wrapper");Array.prototype.slice.call(a).forEach(function(e){return e.classList.add("active")}),t.querySelector('a[data-filter="*"]').classList.add("active")}else{var i=o._getArrayAtoZ().find(function(e){return r.hasOwnProperty(e.toLowerCase())}).toLowerCase();t.querySelector('a[data-filter="'.concat(i,'"]')).classList.add("active"),document.getElementById(i).classList.add("active")}}),_defineProperty(this,"_getAlphaObj",function(e){var t=e.reduce(function(e,t){var r="";if(o.options.filterSelector){var n=t.querySelector(o.options.filterSelector);r=n?o._getText(n):o._getText(t)}else r=o._getText(t);if(r){var a;if(r.trim().replace(/^[_*-]/,""),o.options.prefixes instanceof RegExp)a=null!==o.options.prefixes.exec(r)?r.charAt(o.options.prefixes.lastIndex).toLowerCase():r.charAt(0).toLowerCase();else a=r.charAt(0).toLowerCase();a.match(/[0-9A-Za-z]/)?o.options.concatenateNums&&a.match(/[0-9]/)&&(a="_"):a="-",e[a]?e[a].push(t):e[a]=[t]}return e},{});if(o.options.initHidden){var r=document.createElement("li");r.className="init-hidden-text",r.textContent=o.options.initHiddenText,t.initText=[r]}return t}),_defineProperty(this,"_generateNewListHTML",function(a){var i=document.createElement("div");i.id="alpha-list",i.className="alpha-list";Object.keys(a).sort(function(e,t){return"-"===e?1:"-"===t||e<t?-1:t<e?1:0}).map(function(e){var t=document.createElement("div");if(t.id=e,t.className="alpha-list-wrapper",o.options.showLetterHeadings){var r=document.createElement("h3");r.className="alpha-list-heading",r.textContent=o._getHeading(e),r.textContent&&t.appendChild(r)}var n=document.createElement("ul");return n.className="alpha-list-group",a[e].forEach(function(e){n.appendChild(e.cloneNode(!0))}),t.appendChild(n),i.appendChild(t),t});var e=document.createElement("div");e.id="no-match";var t=document.createElement("ul");t.className="no-match-group";var r=document.createElement("li");return r.textContent=o.options.noMatchText,t.appendChild(r),e.appendChild(t),i.appendChild(e),i}),_defineProperty(this,"_generateAlphaNav",function(r){var e=document.createElement("div");e.id="alpha-nav",e.className="character-container";var t=o._getArrayAtoZ();o.options.includeNums&&(o.options.concatenateNums?t.unshift("_"):o._getArray0to9().reverse().forEach(function(e){return t.unshift(e.toString())})),o.options.includeOther&&t.push("-"),o.options.includeAll&&t.unshift("*"),console.log(t);var n=t.reduce(function(e,t){return r[t.toLowerCase()]?"_"===t?e+'<a class="character-element" data-filter="'+t.toLowerCase()+'" href="#">0 - 9</a>':"-"===t?e+'<a class="character-element" data-filter="'+t.toLowerCase()+'" href="#">...</a>':e+'<a class="character-element" data-filter="'+t.toLowerCase()+'" href="#">'+t+"</a>":"*"===t?e+'<a class="character-element" data-filter="'+t.toLowerCase()+'" href="#">'+o.options.allText+"</a>":o.options.flagDisabled?o.options.removeDisabled?e:e+'<div class="character-element disabled">'+t+"</div>":e+'<a class="character-element" data-filter="no-match" href="#">'+t+"</a>"},"");return e.innerHTML=n,e}),_defineProperty(this,"_getArrayAtoZ",function(){return Array.apply(null,{length:26}).map(function(e,t){return String.fromCharCode(65+t)})}),_defineProperty(this,"_getArray0to9",function(){return Array.apply(null,new Array(10)).map(function(e,t){return t})});if(this.listElem=!!this._isDomElement(e)&&e,this.options=_objectSpread({},{initHidden:!0,initHiddenText:"Tap a letter above to view matching items",initLetter:"",includeAll:!0,allText:"All",noMatchText:"No matching entries",includeNums:!0,concatenateNums:!0,includeOther:!1,flagDisabled:!0,removeDisabled:!1,prefixes:[],filterSelector:"",showCounts:!0,showLetterHeadings:!0},{},t),this.options.prefixes.length){var r=this.options.prefixes.map(function(e){return"string"==typeof e?(e=e.replace(/[.*+?^${}()|[\]\\]/,"\\$&"))+"\\s":"object"===_typeof(e)&&e instanceof RegExp?e.source+"\\s":void 0});this.options.prefixes=new RegExp(r.join("|"),"gi")}this.init()}return _createClass(n,[{key:"_getListItems",value:function(e){return e.children.length?Array.prototype.slice.call(e.children):[]}},{key:"_isDomElement",value:function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?e instanceof HTMLElement:e&&"object"===_typeof(e)&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}},{key:"_getHeading",value:function(e){var t="";switch(!0){case/[*]/.test(e):t=this.options.allText;break;case/[_]/.test(e):t="0 - 9";break;case/[-]/.test(e):t="Others";break;case/^initText$/.test(e):break;default:t=e.toUpperCase()}return t}}]),n}();