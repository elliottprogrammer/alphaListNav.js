/*! alphaListNav.js - v0.7.1
Build Date: 02-19-2020
Author: [Bryan Elliott] (https://github.com/elliottprogrammer/)
Git Repository: git+https://github.com/elliottprogrammer/alphaListNav.js.git */

"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var AlphaListNav=function(){function a(e){var g=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,a),_defineProperty(this,"init",function(){if(g.listElem){var e=g._getListItems(g.listElem);g.alphaObj=g._getAlphaObj(e),g.newListHTML=g._generateNewListHTML(g.alphaObj),g.alphaNav=g._generateAlphaNav(g.alphaObj),g.listElem.parentNode.replaceChild(g.newListHTML,g.listElem),g.newListHTML.parentNode.insertBefore(g.alphaNav,g.newListHTML),g.initAlphaListNav(g.newListHTML,g.alphaNav,g.alphaObj),g.alphaNav.addEventListener("click",function(e){if(e.preventDefault(),e.target.dataset.filter){var t=e.target.dataset.filter,n=!0,a=!1,r=void 0;try{for(var i,o=g.alphaNav.children[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){i.value.classList.remove("active")}}catch(e){a=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}var l=!0,s=!1,c=void 0;try{for(var d,p=g.newListHTML.children[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){d.value.classList.remove("active")}}catch(e){s=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw c}}if(e.target.classList.add("active"),"*"===t){var u=!0,f=!1,h=void 0;try{for(var v,y=g.newListHTML.children[Symbol.iterator]();!(u=(v=y.next()).done);u=!0){var m=v.value;"no-match"!==m.id&&m.classList.add("active")}}catch(e){f=!0,h=e}finally{try{u||null==y.return||y.return()}finally{if(f)throw h}}}else g.newListHTML.querySelector("#".concat(t.replace(/[-]/,"\\$&"))).classList.add("active")}}),g.options.showCounts&&Array.prototype.slice.call(g.alphaNav.children).forEach(function(e){e.addEventListener("mouseover",function(e){var t=0;if(e.target.dataset.filter){var n=e.target.dataset.filter;"no-match"!==n&&(t="*"===n?Object.keys(g.alphaObj).reduce(function(e,t){return e+g.alphaObj[t].length},0):g.alphaObj[n].length)}var a=document.createElement("span");a.className="alphaNav-count-elem",a.style.cssText="position:absolute;left:0;width:100%;text-align:center;font-size:75%;",a.textContent=t,a.style.visibility="none",e.target.appendChild(a);var r=a.getBoundingClientRect().height+2;a.style.top="-".concat(r,"px"),a.style.visibility="visible"}),e.addEventListener("mouseout",function(e){e.target.removeChild(e.target.children[0])})})}else console.error("The supplied argument must be a HTML DOM element or a valid element id (string)")}),_defineProperty(this,"_getText",function(e){var t,n="",a=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=g._getText(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[a++];)n+=g._getText(t);return n}),_defineProperty(this,"initAlphaListNav",function(e,t,n){if(g.options.initLetter)if("*"===g.options.initLetter&&g.options.includeAll){t.querySelector('a[data-filter="'.concat(g.options.initLetter.toLowerCase(),'"]')).classList.add("active");var a=e.querySelectorAll("div.alpha-list-wrapper");Array.prototype.slice.call(a).forEach(function(e){return e.classList.add("active")})}else n.hasOwnProperty(g.options.initLetter.toLowerCase())&&(t.querySelector('a[data-filter="'.concat(g.options.initLetter.toLowerCase(),'"]')).classList.add("active"),e.querySelector("#".concat(g.options.initLetter.toLowerCase())).classList.add("active"));else if(g.options.initHidden)g.options.initHiddenText&&document.getElementById("initText").classList.add("active");else if(g.options.includeAll){var r=e.querySelectorAll("div.alpha-list-wrapper");Array.prototype.slice.call(r).forEach(function(e){return e.classList.add("active")}),t.querySelector('a[data-filter="*"]').classList.add("active")}else{var i=g._getArrayAtoZ().find(function(e){return n.hasOwnProperty(e.toLowerCase())}).toLowerCase();t.querySelector('a[data-filter="'.concat(i,'"]')).classList.add("active"),document.getElementById(i).classList.add("active")}}),_defineProperty(this,"_getAlphaObj",function(e){var t=e.reduce(function(e,t){var n="";if(g.options.filterSelector){var a=t.querySelector(g.options.filterSelector);n=a?g._getText(a):g._getText(t)}else n=g._getText(t);if(n){var r;if(n.trim().replace(/^[_*-]/,""),g.options.prefixes instanceof RegExp)r=null!==g.options.prefixes.exec(n)?n.charAt(g.options.prefixes.lastIndex).toLowerCase():n.charAt(0).toLowerCase();else r=n.charAt(0).toLowerCase();r.match(/[0-9A-Za-z]/)?g.options.concatenateNums&&r.match(/[0-9]/)&&(r="_"):r="-",e[r]?e[r].push(t):e[r]=[t]}return e},{});if(g.options.initHidden){var n=document.createElement("li");n.className="init-hidden-text",n.textContent=g.options.initHiddenText,t.initText=[n]}return t}),_defineProperty(this,"_generateNewListHTML",function(r){var i=document.createElement("div");i.id="alpha-list",i.className="alpha-list";Object.keys(r).sort(function(e,t){return"-"===e?1:"-"===t||e<t?-1:t<e?1:0}).map(function(e){var t=document.createElement("div");if(t.id=e,t.className="alpha-list-wrapper",g.options.showLetterHeadings){var n=document.createElement("h3");n.className="alpha-list-heading",n.textContent=g._getHeading(e),n.textContent&&t.appendChild(n)}var a=document.createElement("ul");return a.className="alpha-list-group",r[e].forEach(function(e){a.appendChild(e.cloneNode(!0))}),t.appendChild(a),i.appendChild(t),t});var e=document.createElement("div");e.id="no-match";var t=document.createElement("ul");t.className="no-match-group";var n=document.createElement("li");return n.textContent=g.options.noMatchText,t.appendChild(n),e.appendChild(t),i.appendChild(e),i}),_defineProperty(this,"_generateAlphaNav",function(n){var e=document.createElement("div");e.id="alpha-nav",e.className="character-container";var t=g._getArrayAtoZ();g.options.includeNums&&(g.options.concatenateNums?t.unshift("_"):g._getArray0to9().reverse().forEach(function(e){return t.unshift(e.toString())})),g.options.includeOther&&t.push("-"),g.options.includeAll&&t.unshift("*");var a=t.reduce(function(e,t){return n[t.toLowerCase()]?"_"===t?e+'<a class="character-element" data-filter="'+t.toLowerCase()+'" href="#">0 - 9</a>':"-"===t?e+'<a class="character-element" data-filter="'+t.toLowerCase()+'" href="#">...</a>':e+'<a class="character-element" data-filter="'+t.toLowerCase()+'" href="#">'+t+"</a>":"*"===t?e+'<a class="character-element" data-filter="'+t.toLowerCase()+'" href="#">'+g.options.allText+"</a>":g.options.flagDisabled?g.options.removeDisabled?e:"_"===t?e+'<div class="character-element disabled">0 - 9</div>':"-"===t?e+'<div class="character-element disabled">...</div>':e+'<div class="character-element disabled">'+t+"</div>":e+'<a class="character-element" data-filter="no-match" href="#">'+t+"</a>"},"");return e.innerHTML=a,e}),_defineProperty(this,"_getArrayAtoZ",function(){return Array.apply(null,{length:26}).map(function(e,t){return String.fromCharCode(65+t)})}),_defineProperty(this,"_getArray0to9",function(){return Array.apply(null,new Array(10)).map(function(e,t){return t})});if(this.listElem=this._isDomElement(e)?e:document.getElementById(e),this.options=_objectSpread({},{initHidden:!0,initHiddenText:"Tap a letter above to view matching items",initLetter:"",includeAll:!0,allText:"All",noMatchText:"No matching entries",includeNums:!0,concatenateNums:!0,includeOther:!1,flagDisabled:!0,removeDisabled:!1,prefixes:[],filterSelector:"",showCounts:!0,showLetterHeadings:!0},{},t),this.alphaObj=null,this.alphaNav=null,this.newListHTML=null,this.options.prefixes.length){var n=this.options.prefixes.map(function(e){return"string"==typeof e?(e=e.replace(/[.*+?^${}()|[\]\\]/,"\\$&"))+"\\s":"object"===_typeof(e)&&e instanceof RegExp?e.source+"\\s":void 0});this.options.prefixes=new RegExp(n.join("|"),"gi")}this.init()}return _createClass(a,[{key:"_getListItems",value:function(e){return e.children.length?Array.prototype.slice.call(e.children):[]}},{key:"_isDomElement",value:function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?e instanceof HTMLElement:e&&"object"===_typeof(e)&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}},{key:"_getHeading",value:function(e){var t="";switch(!0){case/^[*]$/.test(e):t=this.options.allText;break;case/^[_]$/.test(e):t="0 - 9";break;case/^[-]$/.test(e):t="Others";break;case/^initText$/.test(e):break;default:t=e.toUpperCase()}return t}}]),a}();